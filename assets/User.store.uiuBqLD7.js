import{m as c}from"./ToastAssets.LNefn64J.js";const l="/FrancoVidal",s=c({});if(typeof window<"u"){const e=new URLSearchParams(window.location.search),t=e.get("uid"),r=e.get("username"),n=e.get("role"),a=Number(e.get("expires_in")),i=Number(e.get("refresh_expires_in"));if(t&&r&&n&&a){const o={uid:t,username:r,role:n,expires_in:a,refresh_expires_in:i};s.set(o),localStorage.setItem("FV-User",JSON.stringify(o))}else{const o=localStorage.getItem("FV-User");if(o)try{s.set(JSON.parse(o)),m()}catch{console.warn("Invalid user data in localStorage"),localStorage.removeItem("FV-User")}}s.subscribe(o=>{localStorage.setItem("FV-User",JSON.stringify(o))})}function m(){const e=s.get();Date.now()>e.expires_in&&(localStorage.removeItem("FV-User"),window.location.href=`${l}/auth/login`)}const g=()=>{localStorage.removeItem("FV-User"),window.location.reload()},f={Logout:g};export{s as $,f as U};
