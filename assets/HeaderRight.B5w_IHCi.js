import{j as n}from"./jsx-runtime.D3GSbgeI.js";import{u as R}from"./index.CdAc6mVA.js";import{I as y}from"./ToastAssets.LNefn64J.js";import{r}from"./index.DuP_GS2H.js";import{S as $}from"./Scroll.Utils.CRa4nVy-.js";import{U as D,$ as H}from"./User.store.uiuBqLD7.js";import"./index.yBjzXJbu.js";function N(t){return n.jsx("span",{className:"dropdown-item pointer br-6 fs-2",onClick:async()=>{await t.onClick?.(),t.close?.(!1)},children:t.text})}function O({items:t,close:c}){return n.jsx("ul",{className:"dropdown-section f-col",children:t.map((i,l)=>n.jsx(N,{...i,close:c},l))})}function S({frezzeScroll:t=!0,...c}={}){const[i,l]=r.useState(!1),[f,u]=r.useState(!1),[w,h]=r.useState("down"),d=r.useRef(null),p=r.useRef(null),a=c.margin!==void 0?c.margin:8,b=()=>{const e=d.current,o=p.current;if(!e||!o)return;const s=e.getBoundingClientRect(),x=o.offsetHeight,v=window.innerHeight-s.bottom,j=s.top,g=x>v&&j>v;h(g?"up":"down");const E=g?s.top-a*2:window.innerHeight-s.bottom-a*2,L=g?Math.max(a,s.top-x-a):Math.min(s.bottom+a,window.innerHeight-x-a);Object.assign(o.style,{top:`${L+window.scrollY}px`,left:`${s.left+window.scrollX}px`,minWidth:`${s.width}px`,maxHeight:`${E}px`,overflowY:"auto",zIndex:"999"})},m=e=>{e?l(!0):u(!1);const o=setTimeout(()=>{e?u(!0):l(!1)});return t&&$[e?"hide":"show"](),()=>clearTimeout(o)};return r.useEffect(()=>{if(!i)return;const e=o=>{const s=o.target;!p.current?.contains(s)&&!d.current?.contains(s)&&m(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[i]),r.useLayoutEffect(()=>{if(!i)return;b();const e=()=>b(),o=new ResizeObserver(()=>b());return window.addEventListener("scroll",e,!0),window.addEventListener("resize",e),d.current&&o.observe(d.current),()=>{window.removeEventListener("scroll",e,!0),window.removeEventListener("resize",e),o.disconnect()}},[i]),r.useEffect(()=>{const e=()=>m(!1),o=()=>{document.hidden&&m(!1)};return window.addEventListener("blur",e),document.addEventListener("visibilitychange",o),()=>{window.removeEventListener("blur",e),document.removeEventListener("visibilitychange",o)}},[]),{isVisible:i,isAnim:f,btnRef:d,dropdownRef:p,toggle:m,openDirection:w}}function z({...t}){const{isVisible:c,isAnim:i,btnRef:l,dropdownRef:f,toggle:u,openDirection:w}=S({...t});return n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"d-flex w-max",onClick:()=>u(!c),ref:l,children:t.custom||n.jsx("span",{className:"d-flex relative br-6 btn btn-secondary pointer",children:t.text||"Open Dropdown"})}),c&&n.jsxs("div",{className:`dropdown-content absolute ${t.className||"f-col o-hidden br-10"} ${i?" visible":" delete"}`,ref:f,style:{...t.style,transformOrigin:`${w!=="up"?"top":"bottom"} center`},children:[t.title&&n.jsx("p",{className:"dropdown-head fs-2 fw-600 m-0",children:t.title}),t.items?.map((h,d)=>n.jsx(O,{items:h,close:u},d))]})]})}function F(){return R(H),n.jsx(n.Fragment,{children:n.jsx(z,{custom:n.jsx(y,{icon:"setting",size:30,className:"icon-btn br-6"}),items:[[{text:"Logout",onClick:D.Logout}]]})})}export{F as default};
