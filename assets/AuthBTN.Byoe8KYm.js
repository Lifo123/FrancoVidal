import{j as n,L as f}from"./TabMenu.Bg4jKs6U.js";import{t as s}from"./SocialIcon.B6rK-xcF.js";import{B as p}from"./ButtonPromise.CHiaMU2G.js";import{R as l}from"./index.2yoU5xop.js";import"./User.Store.DktMyudh.js";import"./ToastAssets.13M9O8IU.js";import{A as m}from"./Auth.C2bwFOK5.js";function R({type:a}){const o=async()=>{const e=document.querySelectorAll("[data-input-type]"),r=e[0]?.value?.trim(),t=e[1]?.value?.trim(),i=e[2]?.value?.trim(),u=e[3]?.value?.trim();if(!r){s.show("Username is required");return}if(!t){s.show("Password is required");return}if(a==="Register"){if(!i){s.show("Repeat password is required");return}if(t!==i){s.show("Passwords don't match");return}if(u.length!==9){s.show("Phone must be 9 digits");return}(await m.Register(r,t,u)).status||e.forEach(d=>d.value="")}else(await m.Login(r,t)).status||(e[1].value="")};return l.useEffect(()=>{const e=document.querySelectorAll("[data-input-type]");e.forEach(t=>t.addEventListener("input",()=>s.dismiss()));const r=t=>{t.key==="Enter"&&t.target.matches("[data-input-type]")&&(t.preventDefault(),s.dismiss(),o())};return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r),e.forEach(t=>t.removeEventListener("input",()=>s.dismiss()))}},[]),n.jsx(n.Fragment,{children:n.jsx(p,{text:a,className:"btn btn-primary br-6 mt-3 mb-1 fs-3",onClick:async()=>{await f.promise(async()=>await o(),"card_loading")}})})}export{R as default};
