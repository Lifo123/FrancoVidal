import{j as n}from"./jsx-runtime.D3GSbgeI.js";import{u as L}from"./index.CdAc6mVA.js";import"./ToastAssets.BnzsqqrW.js";import{r}from"./index.DuP_GS2H.js";import{S as y}from"./Scroll.Utils.CRa4nVy-.js";import{U as O,$ as S}from"./User.store.Bwc9svvG.js";import"./index.yBjzXJbu.js";function $(e){return n.jsx("span",{className:"dropdown-item pointer br-6 fs-2",onClick:async()=>{await e.onClick?.(),e.close?.(!1)},children:e.text})}function D({items:e,close:c}){return n.jsx("ul",{className:"dropdown-section f-col",children:e.map((i,l)=>n.jsx($,{...i,close:c},l))})}function H({frezzeScroll:e=!0,...c}={}){const[i,l]=r.useState(!1),[f,u]=r.useState(!1),[w,h]=r.useState("down"),d=r.useRef(null),p=r.useRef(null),a=c.margin!==void 0?c.margin:8,b=()=>{const t=d.current,o=p.current;if(!t||!o)return;const s=t.getBoundingClientRect(),g=o.offsetHeight,v=window.innerHeight-s.bottom,E=s.top,x=g>v&&E>v;h(x?"up":"down");const j=x?s.top-a*2:window.innerHeight-s.bottom-a*2,R=x?Math.max(a,s.top-g-a):Math.min(s.bottom+a,window.innerHeight-g-a);Object.assign(o.style,{top:`${R+window.scrollY}px`,left:`${s.left+window.scrollX}px`,minWidth:`${s.width}px`,maxHeight:`${j}px`,overflowY:"auto",zIndex:"999"})},m=t=>{t?l(!0):u(!1);const o=setTimeout(()=>{t?u(!0):l(!1)});return e&&y[t?"hide":"show"](),()=>clearTimeout(o)};return r.useEffect(()=>{if(!i)return;const t=o=>{const s=o.target;!p.current?.contains(s)&&!d.current?.contains(s)&&m(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[i]),r.useLayoutEffect(()=>{if(!i)return;b();const t=()=>b(),o=new ResizeObserver(()=>b());return window.addEventListener("scroll",t,!0),window.addEventListener("resize",t),d.current&&o.observe(d.current),()=>{window.removeEventListener("scroll",t,!0),window.removeEventListener("resize",t),o.disconnect()}},[i]),r.useEffect(()=>{const t=()=>m(!1),o=()=>{document.hidden&&m(!1)};return window.addEventListener("blur",t),document.addEventListener("visibilitychange",o),()=>{window.removeEventListener("blur",t),document.removeEventListener("visibilitychange",o)}},[]),{isVisible:i,isAnim:f,btnRef:d,dropdownRef:p,toggle:m,openDirection:w}}function N({...e}){const{isVisible:c,isAnim:i,btnRef:l,dropdownRef:f,toggle:u,openDirection:w}=H({...e});return n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"d-flex w-max",onClick:()=>u(!c),ref:l,children:e.custom||n.jsx("span",{className:"d-flex relative br-6 btn btn-secondary pointer",children:e.text||"Open Dropdown"})}),c&&n.jsxs("div",{className:`dropdown-content absolute ${e.className||"f-col o-hidden br-10"} ${i?" visible":" delete"}`,ref:f,style:{...e.style,transformOrigin:`${w!=="up"?"top":"bottom"} center`},children:[e.title&&n.jsx("p",{className:"dropdown-head fs-2 fw-600 m-0",children:e.title}),e.items?.map((h,d)=>n.jsx(D,{items:h,close:u},d))]})]})}function I(){const e=L(S);return n.jsx(n.Fragment,{children:n.jsx(N,{custom:n.jsx("img",{src:e.avatar_url_100,className:"icon-btn br-50",height:30,width:30}),items:[[{text:"Logout",onClick:O.logOut}]]})})}export{I as default};
