import{j as v}from"./jsx-runtime.D3GSbgeI.js";import{R as u,r as f}from"./index.DuP_GS2H.js";let r=[],c=0;const i=4;let S=s=>{let e=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},lc:0,listen(n){return t.lc=e.push(n),()=>{for(let a=c+i;a<r.length;)r[a]===n?r.splice(a,i):a+=i;let l=e.indexOf(n);~l&&(e.splice(l,1),--t.lc||t.off())}},notify(n,l){let a=!r.length;for(let o of e)r.push(o,t.value,n,l);if(a){for(c=0;c<r.length;c+=i)r[c](r[c+1],r[c+2],r[c+3]);r.length=0}},off(){},set(n){let l=t.value;l!==n&&(t.value=n,t.notify(l))},subscribe(n){let l=t.listen(n);return n(t.value),l},value:s};return t};function b(s,e,t){let n=new Set([...e,void 0]);return s.listen((l,a,o)=>{n.has(o)&&t(l,a,o)})}let k=(s={})=>{let e=S(s);return e.setKey=function(t,n){let l=e.value;typeof n>"u"&&t in e.value?(e.value={...e.value},delete e.value[t],e.notify(l,t)):e.value[t]!==n&&(e.value={...e.value,[t]:n},e.notify(l,t))},e};const L=typeof window<"u",p=S(L&&localStorage.getItem("F-Theme")||"system"),R=s=>{const e=p.get();if(e==="system"){const t=g();d(s,t?"light":"dark");return}d(s,e==="dark"?"light":"dark")},d=(s,e)=>{if(localStorage.setItem(s,e),p.set(e),e==="system"){const n=g();document.documentElement.classList[n?"add":"remove"]("dark"),document.documentElement.style.colorScheme=n?"dark":"light";return}const t=e==="dark";document.documentElement.classList[t?"add":"remove"]("dark"),document.documentElement.style.colorScheme=t?"dark":"light"},g=()=>window.matchMedia("(prefers-color-scheme: dark)").matches,$=s=>{s.classList.remove("light","dark")},_={remove:$,toggle:R,change:d,preferTheme:g},E=k({G_fetch:!1,card_loading:!1}),m=(s,e)=>{E.setKey(s,e)},D=async(s,e)=>{if(E.get()[e]){console.warn(`Promise for ${e} is already running.`);return}try{h.start(e),await s()}catch(t){console.error(`Error in Loading.promise for ${e}:`,t)}finally{h.end(e)}},h={set:m,start:s=>m(s,!0),end:s=>m(s,!1),promise:D},N=u.createContext({select:"",setSelect:()=>{},setActiveClassName:()=>{},setActiveStyle:()=>{}});function j({children:s,...e}){const[t,n]=u.useState(e.default||""),[l,a]=u.useState(),[o,x]=u.useState();return v.jsx(N.Provider,{value:{select:t,setSelect:n,activeClassName:l,setActiveClassName:a,activeStyle:o,setActiveStyle:x},children:v.jsx("section",{className:e.className||"tab-container f-col mt-4 g-2",style:e.style,children:s})})}let y=(s,e)=>t=>{s.current=t,e()};function w(s,{keys:e,deps:t=[s,e]}={}){let n=f.useRef();n.current=s.get();let l=f.useCallback(o=>e?.length>0?b(s,e,y(n,o)):s.listen(y(n,o)),t),a=()=>n.current;return f.useSyncExternalStore(l,a,a)}export{E as $,_ as D,h as L,N as T,j as a,p as b,S as c,k as m,w as u};
