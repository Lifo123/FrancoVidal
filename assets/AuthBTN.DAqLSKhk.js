import{j as o}from"./jsx-runtime.D3GSbgeI.js";import{L as p}from"./index.DWXiAXll.js";import{t as r}from"./SocialIcon.rA7RIaFF.js";import{B as f}from"./ButtonPromise.CQvvnzeI.js";import{R as l}from"./index.DuP_GS2H.js";import"./User.Store.Dn9tK8Xi.js";import"./ToastAssets.D9iVcK0c.js";import{A as u}from"./Auth.Bx00Djhd.js";import"./index.yBjzXJbu.js";function P({type:n}){const a=async()=>{const e=document.querySelectorAll("[data-input-type]"),s=e[0]?.value?.trim(),t=e[1]?.value?.trim(),i=e[2]?.value?.trim(),m=e[3]?.value?.trim();if(!s){r.show("Username is required");return}if(!t){r.show("Password is required");return}if(n==="Register"){if(!i){r.show("Repeat password is required");return}if(t!==i){r.show("Passwords don't match");return}if(m.length!==9){r.show("Phone must be 9 digits");return}(await u.Register(s,t,m)).status||e.forEach(d=>d.value="")}else(await u.Login(s,t)).status||(e[1].value="")};return l.useEffect(()=>{const e=document.querySelectorAll("[data-input-type]");e.forEach(t=>t.addEventListener("input",()=>r.dismiss()));const s=t=>{t.key==="Enter"&&t.target.matches("[data-input-type]")&&(t.preventDefault(),r.dismiss(),a())};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),e.forEach(t=>t.removeEventListener("input",()=>r.dismiss()))}},[]),o.jsx(o.Fragment,{children:o.jsx(f,{text:n,className:"btn btn-primary br-6 mt-3 mb-1 fs-3",onClick:async()=>{await p.promise(async()=>await a(),"card_loading")}})})}export{P as default};
