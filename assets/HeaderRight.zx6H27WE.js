import{j as t}from"./jsx-runtime.D3GSbgeI.js";import{u as L}from"./index.Cpwd-H5L.js";import{I as y}from"./ToastAssets.kkB4MoOj.js";import{r}from"./index.DuP_GS2H.js";import{S as N}from"./Scroll.Utils.CRa4nVy-.js";import{$ as S}from"./User.store.CijD3W1C.js";import"./index.yBjzXJbu.js";function $(e){return t.jsx("span",{className:"dropdown-item pointer br-6 fs-2",onClick:async()=>{await e.onClick?.(),e.close?.(!1)},children:e.text})}function D({items:e,close:c}){return t.jsx("ul",{className:"dropdown-section f-col",children:e.map((i,a)=>t.jsx($,{...i,close:c},a))})}function H({frezzeScroll:e=!0,...c}={}){const[i,a]=r.useState(!1),[f,u]=r.useState(!1),[w,h]=r.useState("down"),d=r.useRef(null),p=r.useRef(null),l=c.margin!==void 0?c.margin:8,b=()=>{const n=d.current,o=p.current;if(!n||!o)return;const s=n.getBoundingClientRect(),x=o.offsetHeight,v=window.innerHeight-s.bottom,j=s.top,g=x>v&&j>v;h(g?"up":"down");const E=g?s.top-l*2:window.innerHeight-s.bottom-l*2,R=g?Math.max(l,s.top-x-l):Math.min(s.bottom+l,window.innerHeight-x-l);Object.assign(o.style,{top:`${R+window.scrollY}px`,left:`${s.left+window.scrollX}px`,minWidth:`${s.width}px`,maxHeight:`${E}px`,overflowY:"auto",zIndex:"999"})},m=n=>{n?a(!0):u(!1);const o=setTimeout(()=>{n?u(!0):a(!1)});return e&&N[n?"hide":"show"](),()=>clearTimeout(o)};return r.useEffect(()=>{if(!i)return;const n=o=>{const s=o.target;!p.current?.contains(s)&&!d.current?.contains(s)&&m(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[i]),r.useLayoutEffect(()=>{if(!i)return;b();const n=()=>b(),o=new ResizeObserver(()=>b());return window.addEventListener("scroll",n,!0),window.addEventListener("resize",n),d.current&&o.observe(d.current),()=>{window.removeEventListener("scroll",n,!0),window.removeEventListener("resize",n),o.disconnect()}},[i]),r.useEffect(()=>{const n=()=>m(!1),o=()=>{document.hidden&&m(!1)};return window.addEventListener("blur",n),document.addEventListener("visibilitychange",o),()=>{window.removeEventListener("blur",n),document.removeEventListener("visibilitychange",o)}},[]),{isVisible:i,isAnim:f,btnRef:d,dropdownRef:p,toggle:m,openDirection:w}}function O({...e}){const{isVisible:c,isAnim:i,btnRef:a,dropdownRef:f,toggle:u,openDirection:w}=H({...e});return t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"d-flex w-max",onClick:()=>u(!c),ref:a,children:e.custom||t.jsx("span",{className:"d-flex relative br-6 btn btn-secondary pointer",children:e.text||"Open Dropdown"})}),c&&t.jsxs("div",{className:`dropdown-content absolute ${e.className||"f-col o-hidden br-10"} ${i?" visible":" delete"}`,ref:f,style:{...e.style,transformOrigin:`${w!=="up"?"top":"bottom"} center`},children:[e.title&&t.jsx("p",{className:"dropdown-head fs-2 fw-600 m-0",children:e.title}),e.items?.map((h,d)=>t.jsx(D,{items:h,close:u},d))]})]})}function U(){const e=L(S);return t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"fs-2",children:e.username||"Unknown"}),t.jsx(O,{custom:t.jsx(y,{icon:"setting",size:30,className:"icon-btn br-6"})})]})}export{U as default};
