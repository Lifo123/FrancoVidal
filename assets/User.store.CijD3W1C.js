import{m as c}from"./index.Cpwd-H5L.js";const l="/FrancoVidal",o=c();if(typeof window<"u"){console.log("wasa");const e=new URLSearchParams(window.location.search),t=e.get("uid"),r=e.get("username"),n=e.get("role"),a=Number(e.get("expires_in")),i=Number(e.get("refresh_expires_in"));if(t&&r&&n&&a){const s={uid:t,username:r,role:n,expires_in:a,refresh_expires_in:i};o.set(s),localStorage.setItem("FV-User",JSON.stringify(s))}else{const s=localStorage.getItem("FV-User");if(s)try{o.set(JSON.parse(s))}catch{console.warn("Invalid user data in localStorage"),localStorage.removeItem("FV-User")}}o.subscribe(s=>{localStorage.setItem("FV-User",JSON.stringify(s))}),g()}function g(){const e=o.get(),t=Date.now();(!e.uid||!e.expires_in||t>e.expires_in)&&(localStorage.removeItem("FV-User"),o.set({}),window.location.href=`${l}/auth/login`)}export{o as $};
