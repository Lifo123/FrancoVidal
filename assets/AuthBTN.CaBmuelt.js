import{j as o}from"./jsx-runtime.D3GSbgeI.js";import"./ToastAssets.DyaLsPIA.js";import{B as p}from"./ButtonPromise.b5vnahBF.js";import{R as f}from"./index.DuP_GS2H.js";import{U as s,A as m}from"./Auth.C-C8zuyb.js";import"./index.yBjzXJbu.js";import"./Interface.Store.DyO9FG3J.js";function L({type:i}){const n=async()=>{const e=document.querySelectorAll("[data-input-type]"),r=e[0]?.value?.trim(),t=e[1]?.value?.trim(),a=e[2]?.value?.trim(),u=e[3]?.value?.trim();if(!r){s.toast.show("Username is required");return}if(!t){s.toast.show("Password is required");return}if(i==="Register"){if(!a){s.toast.show("Repeat password is required");return}if(t!==a){s.toast.show("Passwords don't match");return}if(u.length!==9){s.toast.show("Phone must be 9 digits");return}(await m.Register(r,t,u)).status||e.forEach(d=>d.value="")}else(await m.Login(r,t)).status||(e[1].value="")};return f.useEffect(()=>{const e=document.querySelectorAll("[data-input-type]");e.forEach(t=>t.addEventListener("input",()=>s.toast.dismiss()));const r=t=>{t.key==="Enter"&&t.target.matches("[data-input-type]")&&(t.preventDefault(),s.toast.dismiss(),n())};return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r),e.forEach(t=>t.removeEventListener("input",()=>s.toast.dismiss()))}},[]),o.jsx(o.Fragment,{children:o.jsx(p,{text:i,className:"btn btn-primary br-6 mt-3 mb-1 fs-3",onClick:async()=>{await s.Loading.promise(async()=>await n(),"card_loading")}})})}export{L as default};
